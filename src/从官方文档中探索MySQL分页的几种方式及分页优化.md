
# ä»å®˜æ–¹æ–‡æ¡£ä¸­æ¢ç´¢MySQLåˆ†é¡µçš„å‡ ç§æ–¹å¼åŠåˆ†é¡µä¼˜åŒ–


###  æ¦‚è§ˆ

ç›¸æ¯”äºOracleï¼ŒSQL Server ç­‰æ•°æ®åº“ï¼ŒMySQLåˆ†é¡µçš„æ–¹å¼ç®€å•å¾—å¤šäº†ï¼Œå®˜æ–¹è‡ªå¸¦äº†åˆ†é¡µè¯­æ³• `limit` è¯­å¥:

```sql
select * from test_t LIMIT {[offset,] row_count | row_count OFFSET offset}
```
ä¾‹å¦‚ï¼šè¦è·å–ç¬¬12è¡Œåˆ°ç¬¬21è¡Œçš„è®°å½•å¯ä»¥è¿™æ ·å†™ï¼š
```sql
select * from test_t limit 11,10;
```
æˆ–è€…
```sql
select * from test_t limit 10 offset 11;
```
å½“ç„¶ç®€å•çš„ç”¨æ³•å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœé‡åˆ°æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹å’Œåˆ†é¡µåœ¨ä¸­é—´æˆ–åé¢éƒ¨åˆ†çš„è¯ï¼Œè¿™æ ·ä½¿ç”¨ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚ç­‰ä¼šå†çœ‹ä¸€ä¸‹ä¼˜åŒ–åçš„å¦å¤–ä¸€ç§åˆ†é¡µæ–¹å¼ã€‚

### ä»å®˜ç½‘ä¸­æ¢ç´¢
>æƒ³ç€ `limit` è¯­å¥æ—¢ç„¶æ˜¯å®˜æ–¹è¯­è¨€ï¼Œé‚£æ ·å®˜æ–¹æ–‡æ¡£ä¸­ä¸€å®šä¼šæœ‰çš„ä»‹ç»MySQLåˆ†é¡µçš„æ–¹å¼å’Œä¼˜åŒ–çš„ç›¸å…³çš„å»ºè®®å§ï¼Œåé¢æˆ‘çœ‹äº†ä¸€ä¸‹å…¶å®ä¸æƒ³è±¡ä¸­çš„æœ‰æŒºå¤§å·®åˆ«çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸æ˜¯å¾ˆå…¨é¢ğŸ¤

#### å…³äºMySQL åˆ†é¡µæ–¹å¼çš„å®˜æ–¹æ–‡æ¡£è§£è¯»

å…ˆæ¥çœ‹çœ‹å®˜ç½‘æ–‡æ¡£ä¸­æ˜¯æ€ä¹ˆæ ·æè¿° `limit`è¯­å¥çš„ ï¼š
>The LIMIT clause can be used to constrain the number of rows returned by the SELECT statement. LIMIT takes one or two numeric arguments, which must both be nonnegative integer constants, with these exceptions:
Within prepared statements, LIMIT parameters can be specified using ? placeholder markers.
Within stored programs, LIMIT parameters can be specified using integer-valued routine parameters or local variables.
æ¥è‡ªï¼šhttps://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html

ç¿»è¯‘æˆä¸­æ–‡ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ï¼šâ€œlimit è¯­å¥å¯ä»¥ç”¨åˆ° select è¯­å¥ä¸­å»é™åˆ¶è¿”å›ç»“æœçš„è¡Œæ•°ã€‚limit å­è¯­å¥å¯ä»¥å¸¦ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°éƒ½å¿…é¡»æ˜¯**éè´Ÿæ•´æ•°å¸¸é‡**ï¼Œä½†æœ‰ä»¥ä¸‹ä¾‹å¤–ï¼šä¸€ä¸ªæ˜¯é¢„æ‰§è¡Œè¯­å¥ä¸­å¯ä»¥ç”¨ï¼Ÿæ›¿ä»£ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åœ¨å­˜å‚¨ç¨‹åºä¸­ç”¨è¡¨è¾¾å¼æ›¿ä»£â€

ç®€å•æ¥è¯´ï¼Œ**å°±æ˜¯ limit æ˜¯ç”¨æ¥é™åˆ¶æŸ¥è¯¢è¿”å›è¡Œæ•°çš„**ï¼ˆè¿™é‡Œä¸¾ä¾‹çš„æ˜¯ select è¯­å¥ä¸­limitçš„ç”¨æ³•ï¼Œåœ¨update ç­‰è¯­å¥ä¸­ä¹Ÿæœ‰ç›¸å…³ limit çš„ä»‹ç»ï¼Œå¤§æ¦‚ç±»ä¼¼ï¼‰ã€‚

å¥½å§ï¼Œè®²äº†ç­‰ä¼šæ²¡è®²ğŸ¤£

æ¥ç€ï¼Œåœ¨å®˜ç½‘æ–‡æ¡£ä¸­ä¸¾ä¾‹äº† limit çš„ä¸€äº›ç®€å•ç”¨æ³•ç¤ºä¾‹ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–è¯´æ˜ã€‚
![selectè¯­å¥ä¸­çš„limitè¯´æ˜](https://img-blog.csdnimg.cn/20210124154727300.png)
å¯ä»¥é‡ç‚¹å…³æ³¨ä¸‹åé¢çº¢æ¡†éƒ¨åˆ†çš„ä¸¤å¥æè¿°ã€‚

ç¬¬ä¸€å¥ä¸ºï¼š**ä¸ºäº†å…¼å®¹PostgreSQLï¼ŒMySQL ä¹Ÿæ”¯æŒ `limit  offset` è¿™ç§æ–¹å¼çš„è¯­å¥**

è¿™é‡Œè¯´çš„æ˜¯ï¼ŒMySQL åˆ†é¡µ é™¤äº†å¯ä»¥è¿™æ ·å†™
```sql
select * from test_t limit 11,10
```
ä¹Ÿå¯ä»¥è¿™æ ·å†™
```sql
select * from test_t limit 10 offset 11
```
offset è¿™ç§æ–¹å¼ï¼Œæˆ‘ä¹‹å‰è¿˜çœŸæ²¡è§è¿‡MySQLè¿™æ ·ç”¨çš„ğŸ˜‚ï¼Œåˆå¾—åˆ°ä¸€ä¸ªå†·çŸ¥è¯†ã€‚

è‡³äºä¸ºä»€ä¹ˆéœ€è¦å…¼å®¹ PostgreSQL ,æˆ‘æœäº†ä¸€ä¸‹ç½‘ä¸Šèµ„æ–™ï¼Œä¼°è®¡æ˜¯ å½“æ—¶PostgreSQL å¾ˆç«ï¼Œå¯ä»¥è®©ç”¨æˆ·æ²¡æœ‰ä»€ä¹ˆæˆæœ¬å°±è¿ç§»åˆ°MySQLä¸Š

ç¬¬äºŒå¥ä¸ºï¼š**å¦‚æœLIMITå‡ºç°åœ¨å¸¦åœ†æ‹¬å·çš„æŸ¥è¯¢è¡¨è¾¾å¼ä¸­ï¼Œå¹¶ä¸”ä¹Ÿåº”ç”¨åœ¨å¤–éƒ¨æŸ¥è¯¢ä¸­ï¼Œåˆ™æŸ¥è¯¢çš„ç»“æœæœªå‡†ç¡®å®šä¹‰ï¼Œå¹¶ä¸”å¯èƒ½åœ¨å°†æ¥çš„MySQLç‰ˆæœ¬ä¸­æ›´æ”¹ã€‚**

è¿™é‡Œè¯´çš„å°±æ˜¯ï¼Œä¾‹å¦‚è¿™æ ·çš„ SQL ç»“æœæœ‰å¯èƒ½ä»¥åä¼šå‘ç”Ÿå˜åŒ–ï¼š
```sql
SELECT * FROM d_comment WHERE  id IN (SELECT id FROM `d_app_info` ORDER BY id LIMIT 1,10) ORDER BY id LIMIT 0,10
```

æŒºæ€€ç–‘å®ƒè¿™é‡Œçš„æè¿°çš„ï¼Œè¿™æ ·çš„ç”¨æ³•ä¸æ˜¯å¾ˆæ­£å¸¸å—ï¼ŸğŸ™„ä¼šæœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿã€‚æˆ‘è¿™é‡Œçš„ç”¨çš„æ˜¯MySQL 5.6ï¼ˆ2013å¹´ï¼‰ç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œäºæ˜¯æˆ‘åˆ‡æ¢åˆ°çš„MySQL 5.8ï¼ˆ2020å¹´ï¼‰çš„ç‰ˆæœ¬ï¼Œå‘ç°è¿™é‡Œçš„æè¿°è¿˜æ˜¯ä¸å˜ğŸ™ƒã€‚è¿‡äº†7å¹´è¿™é‡Œçš„æè¿°è¿˜æ˜¯æ²¡å˜ï¼Œè¿™ä»¥åéƒ½åº”è¯¥ä¸ä¼šå˜åŒ–äº†å§ã€‚ã€‚ã€‚


ä½†æ˜¯å½“æˆ‘æ‰§è¡Œä¸Šé¢çš„ SQLçš„æ—¶å€™ï¼Œpapaæ‰“è„¸äº†
![æ‰“è„¸äº†](https://img-blog.csdnimg.cn/2021012416421384.jpg)
æç¤ºè¿™ä¸ªé”™è¯¯ï¼š
```sql
This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'
```
äºæ˜¯åˆå»æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°åœ¨å®˜æ–¹æ–‡æ¡£ä¸­å°±è¯´æ˜äº†ï¼Œå°±ä¸èƒ½è¿™æ ·ä½¿ç”¨
![mysql å­æŸ¥è¯¢ä¸æ”¯æŒlimitè¯´æ˜](https://img-blog.csdnimg.cn/2021012416460943.png)
>æ¥è‡ªï¼šhttps://dev.mysql.com/doc/refman/8.0/en/subquery-restrictions.html

éœ€è¦æ”¹å†™æˆè¿™æ ·ï¼Œ**åµŒå¤šä¸€å±‚å­æŸ¥è¯¢**ï¼š
```sql
 SELECT id,dt FROM d_comment WHERE  id IN (  SELECT * FROM (SELECT id FROM `d_app_info` ORDER BY app_name,id LIMIT 1,10) t2  ) ORDER BY id LIMIT 0,10;
```
æˆ–è€…**ç”¨å¤šè¡¨å…³è”æŸ¥è¯¢**æ¥è§£å†³ï¼ˆè¿™ç§æ–¹å¼åœ¨åˆ†é¡µæ•°é‡å¤šçš„æ—¶å€™æ€§èƒ½æ›´å¥½äº›ï¼‰
```sql
SELECT a.id,a.dt FROM d_comment a , (SELECT id FROM `d_app_info` ORDER BY app_name,id LIMIT 1,10) b WHERE a.id=b.id ORDER BY a.id ;
```


ç„¶åï¼Œæˆ‘ä¸å¤–å±‚æ²¡æœ‰ limit çš„ SQL æ‰§è¡Œå¯¹æ¯”äº†ä¸€ä¸‹ï¼š
```sql
 SELECT id,dt FROM d_comment WHERE  id IN (  SELECT * FROM (SELECT id FROM `d_app_info` ORDER BY app_name,id LIMIT 1,10) t2  ) ORDER BY id ;
```
![å¤–å±‚å¸¦limitçš„](https://img-blog.csdnimg.cn/20210124165838738.png)
![å¤–å±‚ä¸å¸¦limitçš„](https://img-blog.csdnimg.cn/20210124165859812.png)
ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¸é¢„æƒ³çš„ä¸€æ ·ï¼Œè¿™é‡Œçš„åº”è¯¥æ˜¯ä¸éœ€è¦ç®¡äº†ğŸ™ƒï¼Œé™¤äº†æ³¨æ„ä¸€ä¸‹è¦åµŒå¥—å¤šä¸€å±‚


#### å…³äºMySQL limit ä¼˜åŒ–ç›¸å…³çš„å®˜æ–¹æ–‡æ¡£è§£è¯»
æƒ³ç€å®˜æ–¹æ–‡æ¡£ä¸Šä¹Ÿä¼šæœ‰åˆ†é¡µç›¸å…³ä¼˜åŒ–çš„ä»‹ç»ï¼Œäºæ˜¯åœ¨å®˜æ–¹æ–‡æ¡£çš„æœç´¢æ è¾“å…¥ limit æˆ– page ä¸Šæœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸ limit ä¼˜åŒ–ç›¸å…³çš„åªæœ‰ä»¥ä¸‹è¿™ä¸ªï¼š
![å®˜æ–¹æ–‡æ¡£ä¸­å…³äºlimit çš„ä¼˜åŒ–](https://img-blog.csdnimg.cn/20210125000326991.PNG)
>LIMIT Query Optimization
>If you need only a specified number of rows from a result set, use a LIMIT clause in the query, rather than fetching the whole result set and throwing away the extra data.
MySQL sometimes optimizes a query that has a LIMIT row_count clause and no HAVING clause:
å¼•ç”¨è‡ªï¼šhttps://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html

å®˜æ–¹æ–‡æ¡£ï¼Œè¿™éƒ¨åˆ†ä¸»è¦ä»‹ç»çš„åœ¨åŒ…å«limit row_count è¿™ç§è¯­å¥çš„å„ç§ç±»å‹æŸ¥è¯¢çš„æƒ…å†µä¸‹ï¼ŒMySQLä¼šåšäº†å“ªäº›ä¼˜åŒ–ã€‚å…¶ä¸­å¤§éƒ¨åˆ†æ˜¯ç”¨ä¸åˆ°çš„ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹2ç§æ¯”è¾ƒæœ‰è¶£çš„ç‰¹ç‚¹ã€‚

ä¸€ï¼Œ**æŸ¥è¯¢æ€»è¡Œæ•°çš„å¦ä¸€ç§æ–¹æ³•**

æŸ¥è¯¢åˆ†é¡µçš„æ€»è¡Œæ•°ï¼Œæˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä½¿ç”¨çš„ï¼Œ `select count(*)` å»å®ç°çš„ã€‚æ–‡æ¡£ä¸­ä»‹ç»äº†å¦å¤–ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ `select FOUND_ROWS();` è¯­å¥ï¼Œä¸è¿‡è¿™ç§æ–¹å¼çš„éœ€è¦ä¿®æ”¹è·å–limit æ•°æ®çš„SQL ã€‚ä¾‹å¦‚ï¼šå¦‚æœåœ¨SQLä¸­åŒæ—¶æ‰§è¡Œè¿™ä¸¤æ¡è¯­å¥ï¼Œå°±å¯ä»¥åˆ†åˆ«è·å–åˆ°åˆ†é¡µçš„æ•°æ®å’Œåˆ†é¡µæ€»è¡Œæ•°ã€‚
```sql
# è¿™ä¸ªSQL æ¯”å¹³æ—¶çš„åˆ†é¡µSQL å¤šäº† SQL_CALC_FOUND_ROWS ä¿®é¥°
SELECT SQL_CALC_FOUND_ROWS  id,`name` FROM `d_common_all_select_info` ORDER BY `name` LIMIT 0,10;
# è¿™æ¡SQLè¿”å›çš„ä¸ºæ€»è¡Œæ•°ï¼Œä¸è¿‡ç»Ÿè®¡æ–¹å¼ä¸select count(*) æœ‰äº›ä¸åŒï¼Œå¦å¤–éœ€è¦ä¸ä¸Šé¢çš„SQL åŒæ—¶æ‰§è¡Œ
SELECT FOUND_ROWS();
```

äºŒï¼Œ**æŸ¥è¯¢çš„order by çš„é¡ºåºé—®é¢˜**
>If multiple rows have identical values in the ORDER BY columns, the server is free to return those rows in any order, and may do so differently depending on the overall execution plan. In other words, the sort order of those rows is nondeterministic with respect to the nonordered columns.
One factor that affects the execution plan is LIMIT, so an ORDER BY query with and without LIMIT may return rows in different orders

ç¿»è¯‘è¿‡æ¥å¹¶ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¦‚æœorder by ä¸­åŒ…å«ç›¸åŒçš„å€¼ï¼Œåˆ™order byå‡ºæ¥çš„ç»“æœä¸ä¸€å®šæ¯æ¬¡ä¸€æ ·ï¼Œå®ƒè¿”å›çš„é¡ºåºä¸æ€»ä½“æ‰§è¡Œè®¡åˆ’æœ‰å…³ã€‚ä¾‹å¦‚ï¼Œå¸¦limit å’Œä¸å¸¦limitçš„order by è¯­å¥ï¼Œè¿”å›é¡ºåºä¸ä¸€æ ·çš„ã€‚

æ‰€ä»¥å¦‚æœorder by çš„åˆ—åŒ…å«ç›¸åŒå€¼çš„æ—¶å€™ï¼Œä¿è¯æ¯æ¬¡éƒ½æ˜¯ç›¸åŒçš„ç»“æœï¼Œæœ€å¥½åœ¨æœ€åçš„åŠ ä¸Šidåˆ—(è¿™é‡Œå‡è®¾è‡ªå¢idåˆ—åä¸º`id`)ã€‚ä¾‹å¦‚ï¼šå¹³å¸¸è¦`order by dt` çš„ï¼Œç„¶ådtä¸­ä¼šåŒ…å«ç›¸åŒå€¼çš„æœ€å¥½ä¿®æ”¹ä¸º `order by dt,id`
![å¸¦limit å’Œä¸å¸¦limitçš„order byç»“æœ](https://img-blog.csdnimg.cn/20210125002933448.PNG)


### MySQL åˆ†é¡µä¼˜åŒ–çš„ä¸¤ç§æ–¹æ³•
ç»è¿‡å¤šæ¬¡åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æŸ¥æ‰¾ï¼Œæ²¡æœ‰å‘ç°å…¶ä»–å…³äº MySQL åˆ†é¡µä¼˜åŒ–çš„æè¿°ï¼Œä½†æ˜¯å¦‚æœåœ¨è¡¨æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨ limit offset, row_num è¿™ç§æ–¹å¼å»æŸ¥è¯¢çš„ä¼šå¾ˆæ…¢çš„ã€‚æ‰€ä»¥è¿™é‡Œå†ä»‹ç»ä¸€ä¸‹MySQL åˆ†é¡µæŸ¥è¯¢çš„å¦ä¸€ç§æ–¹å¼ï¼Œå¹¶ä¸åŸæ–¹å¼è¿›è¡Œä¸€äº›å¯¹æ¯”ã€‚

æ™®é€šçš„limit offset,row_num æ–¹å¼ï¼Œä¼šå…ˆä»æ•°æ®æ–‡ä»¶ä¸­æŸ¥åˆ°offset + row_num è®°å½•ï¼Œç„¶åæŠŠå‰ offset è®°å½•æŠ›å¼ƒæ‰è¿”å›çš„ã€‚ä¾‹å¦‚ï¼šlimit 1000,10 ï¼Œä¼šä»æ•°æ®æ–‡ä»¶ä¸­æŸ¥è¯¢1010 è¡Œè®°å½•ï¼Œåªè¿”å›çš„10è®°å½•ï¼Œå‰1000è¡Œè®°å½•ä¼šè¢«æŠ›å¼ƒæ‰ã€‚ä¸ºäº†ä¼˜åŒ–è¿™ç§çš„å¤§åç§»çš„æŸ¥è¯¢çš„ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š**å»¶è¿Ÿå…³è”** å’Œ ä¹¦ç­¾è®°å½•ã€‚å…¶ä¸­å»¶è¿Ÿå…³è”åº”ç”¨çš„ä¸šåŠ¡åœºæ™¯æ›´åŠ å¹¿æ³›ã€‚


è¿™é‡Œä½¿ç”¨ä¸€å¼ æµ‹è¯•è¡¨ `page_test_t` æ¥è¿›è¡Œæµ‹è¯•ï¼Œè¡¨çš„è¡Œæ•°å¦‚ä¸‹ï¼ˆå¤§çº¦**110ä¸‡**è¡Œï¼‰ï¼š

```sql
-- æŸ¥è¯¢è¡¨è¡Œæ•°
SELECT TABLE_NAME, PARTITION_NAME, TABLE_ROWS, AVG_ROW_LENGTH, DATA_LENGTH FROM INFORMATION_SCHEMA.PARTITIONS WHERE TABLE_NAME='page_test_t' ;
```
![æµ‹è¯•è¡¨è¡Œæ•°ç»“æœ](https://img-blog.csdnimg.cn/20210202092435774.png)
è¿™é‡Œå‡è®¾å°† offset  è®¾ç½®ä¸º 600000ï¼Œå– 10 è¡Œè®°å½•æ¥å¯¹æ¯”å„ä¸ªåˆ†é¡µæ–¹æ³•ä¹‹é—´çš„æŸ¥è¯¢é€Ÿåº¦
#### æ™®é€šåˆ†é¡µ
æ™®é€šåˆ†é¡µï¼Œç›´æ¥ä½¿ç”¨ limit offset,row_num å»æŸ¥è¯¢
```sql
SELECT SQL_NO_CACHE  * FROM `d_common_all_select_info` ORDER BY id  LIMIT 600000,10;
```
æŸ¥è¯¢10æ¬¡,æŸ¥è¯¢ç»“æœä¸ä»¥ä¸‹ç»“æœç›¸å·®ä¸è¶…è¿‡0.01sï¼ŒæŸ¥è¯¢æ—¶é—´è€—æ—¶ç¨³å®šåœ¨ `0.46 s`

![æ™®é€šåˆ†é¡µæŸ¥è¯¢è€—æ—¶](https://img-blog.csdnimg.cn/20210202092806352.png)

#### å»¶è¿Ÿå…³è”
å¯ä»¥å…ˆæŒ‰ç…§æ¡ä»¶åˆ†é¡µæŸ¥è¯¢å‡ºä¸»é”®ï¼Œç„¶åæ ¹æ®ä¸»é”®çš„å†å»å…³è”è¡¨ï¼ŒæŸ¥è¯¢å‡ºæ‰€æœ‰éœ€è¦åˆ—çš„è®°å½•æ•°ï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰«æå¤ªå¤šçš„æ•°æ®é¡µã€‚æŒ‰ç…§è¦æ±‚æ¡ä»¶ï¼Œå¯ä»¥å†™å‡ºè¿™æ ·çš„ä¾‹å­ SQLï¼š
```sql
SELECT SQL_NO_CACHE  a.* FROM `page_test_t` a,(SELECT id FROM page_test_t ORDER BY id LIMIT 600000,10) b WHERE a.id=b.id ORDER BY a.id ;
```
æŸ¥è¯¢10æ¬¡,æŸ¥è¯¢ç»“æœä¸ä»¥ä¸‹ç»“æœç›¸å·®ä¸è¶…è¿‡0.01sï¼ŒæŸ¥è¯¢æ—¶é—´è€—æ—¶ç¨³å®šåœ¨ `0.18 s`
![å»¶è¿Ÿå…³è”æŸ¥è¯¢ç»“æœ](https://img-blog.csdnimg.cn/20210202093038831.png)

#### ä¹¦ç­¾è®°å½•
â€œä¹¦ç­¾è®°å½•â€æŒ‡æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥å­˜å‚¨ä¸Šä¸€æ¬¡å–æ•°è®°å½•çš„ä½ç½®ï¼Œç„¶ååœ¨è·å–ä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå€¼ï¼Œæ¥è·å–å¤§äºè¿™ä¸ªå€¼çš„ä¸‹ä¸€é¡µè®°å½•(ä¸Šä¸€é¡µç±»ä¼¼)ï¼Œç›´æ¥ä»è¯¥å€¼ä»¥åå¼€å§‹æ‰«æã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ä¸Šä¸€æ¬¡è·å–åˆ°äº†åˆ†é¡µ limit 599990,10 çš„è®°å½•ï¼Œæœ€å¤§çš„å€¼çš„idä¸º `1690344`(è¿™é‡Œçš„å€¼ä½œä¸ºäº†ä¸€ä¸ªä¹¦ç­¾è®°å½•)ï¼Œåˆ™æˆ‘ä»¬è·å– limit 600000,10 çš„è®°å½•å¯ä»¥è¿™æ ·å†™ï¼š
```sql
SELECT SQL_NO_CACHE  * FROM `page_test_t`  where id>1690344 ORDER BY id  LIMIT 10 ;
```
æŸ¥è¯¢10æ¬¡,æŸ¥è¯¢ç»“æœä¸ä»¥ä¸‹ç»“æœç›¸å·®ä¸è¶…è¿‡0.01sï¼ŒæŸ¥è¯¢æ—¶é—´è€—æ—¶ç¨³å®šåœ¨ `0.004 s`
![ä¹¦ç­¾è®°å½•æŸ¥è¯¢](https://img-blog.csdnimg.cn/20210202093941588.png)

#### å°ç»“
å¯ä»¥çœ‹åˆ°ï¼Œå»¶è¿Ÿå…³è” æ¯” æ™®é€šåˆ†é¡µæ–¹å¼æŸ¥è¯¢é€Ÿåº¦å¿«äº†è¿‘`3å€`ï¼Œâ€œä¹¦ç­¾è®°å½•â€æ¯”æ™®é€šåˆ†é¡µæ–¹å¼å¿«äº†è¿‘`100å€`ã€‚ä¸è¿‡â€œä¹¦ç­¾è®°å½•â€åªé€‚åˆåªæœ‰å‰ç¿»é¡µï¼Œåç¿»é¡µè¿™ç§ç±»å‹çš„åˆ†é¡µäº¤äº’ï¼Œä¸èƒ½è·³è½¬åˆ°ä»»æ„é¡µç ï¼Œå»¶è¿Ÿå…³è”åˆ™å¯ä»¥æ”¯æŒï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨å»¶è¿Ÿå…³è”æ–¹å¼æ¥æ›¿æ¢åŸæ™®é€šåˆ†é¡µçš„æ–¹å¼ã€‚
>é™¤äº†è¿™ä¸¤ç§æ–¹æ³•ï¼Œè¿˜æœ‰ä¾‹å¦‚ä½¿ç”¨é¢„å…ˆè®¡ç®—çš„æ±‡æ€»è¡¨ æˆ–è€…å…³è”åˆ°å¦å¤–ä¸€å¼ å†—ä½™è¡¨ï¼Œå†—ä½™è¡¨ä¸­åŒ…å«è¡¨çš„ä¸»é”®å’Œéœ€è¦åšæ’åºçš„æ•°æ®åˆ— ç­‰æ–¹æ³•å»ä¼˜åŒ–åˆ†é¡µã€‚ å‚è€ƒè‡ªï¼šã€Šé«˜æ€§èƒ½MySQLï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹

#### æ€»ç»“

æœ¬æ–‡ä»SQL çš„ `limit` åˆ†é¡µè¯­å¥å‡ºå‘ï¼Œè¯¦ç»†ä»‹ç»äº† `limit` çš„è¯­æ³•åŠç®€è¦çš„æ¦‚æ‹¬äº†MySQL å®˜æ–¹æ–‡æ¡£å¯¹ `limit` çš„ä¼˜åŒ–ï¼Œå¦å¤–å¯¹æ¯”äº†ä¸¤ç§å¸¸ç”¨çš„åˆ†é¡µä¼˜åŒ–æ–¹æ³• **å»¶è¿Ÿå…³è”** å’Œ **â€œä¹¦ç­¾è®°å½•â€**ã€‚



>å‚è€ƒï¼š
https://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html
https://dev.mysql.com/doc/refman/5.6/en/select.html
https://www.liaoxuefeng.com/wiki/1177760294764384/1217864791925600
https://segmentfault.com/a/1190000017059239?utm_source=sf-related
MySQLä¸­SQL_CALC_FOUND_ROWSçš„ç”¨æ³• https://www.cnblogs.com/chinesern/p/8260506.html
